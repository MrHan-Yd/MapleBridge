<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="priv.backend.mapper.CommentMapper">
    <!--SQL-->

    <!--SQL-->

    <!--Map-->
        <resultMap id="getAllCommentByPostIdMap" type="ESComment" >
            <id property="commentId" column="comment_id" />
            <result property="postId" column="post_id" />
            <result property="userId" column="user_id" />
            <result property="content" column="content" />
            <result property="timestamp" column="timestamp" />
            <result property="likeCount" column="like_count" />
            <collection property="likes" ofType="ESLike" column="comment_id"
                        select="priv.backend.mapper.LikeMapper.getESCommentLikeByCommentId" />
        </resultMap>
    <!--Map-->

    <!--Select-->
        <!--根据ID查询所有评论-->
        <select id="getAllCommentByPostId" resultMap="getAllCommentByPostIdMap" >
            SELECT
                comment_id,
                post_id,
                user_id,
                content,
                `timestamp`,
                like_count
            FROM `comment`
            WHERE post_id = #{postId}
        </select>
    <!--Select-->

    <!--Update-->

    <!--Update-->

    <!--Insert-->

    <!--Insert-->

    <!--Delete-->

    <!--Delete-->

</mapper>