<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="priv.backend.mapper.PostHitsMapper">
    <!--SQL-->

    <!--SQL-->

    <!--Map-->

    <!--Map-->

    <!--Select-->
        <!-- 根据postId查询点击量和版本号-->
            <select id="selectPostHitsByPostId" resultType="PostHits" parameterType="String">
                select
                    hits,
                    version
                from post_hits
                where post_id = #{postId}
            </select>
        <!-- 根据postId查询点击量和版本号-->
        <!--根据PostId查询点击量-->
            <select id="getHitsByPostId" resultType="String" parameterType="String" >
                select
                    hits
                from post_hits
                where post_id = #{postId}
            </select>
        <!--根据PostId查询点击量-->
    <!--Select-->

    <!--Update-->
        <!--根据postID修改点击量数据-->
        <update id="updatePostHitsByPostId" parameterType="PostHits">
            update post_hits
            set
                update_time = #{updateTime},
                hits = #{hits},
                version = version + 0.1
            where post_id = #{postId}
            and version = #{version}
        </update>
        <!--根据postID修改点击量数据-->
    <!--Update-->

    <!--Insert-->
        <!--根据postID插入点击量数据-->
        <insert id="insertPostHitsByPostId" parameterType="PostHits">
            insert into
            post_hits(post_id, hits, update_time)
            values(#{postId}, #{hits}, #{updateTime})
        </insert>
        <!--根据postID插入点击量数据-->
    <!--Insert-->

    <!--Delete-->

    <!--Delete-->

</mapper>